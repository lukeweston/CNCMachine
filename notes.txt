
=======================
 CNC Milling Machine
=======================

In case you haven't seen it, Damien has got many photos and some documentation
regarding his CNC machine here:

http://www.ph.unimelb.edu.au/~dpgeorge/cnc/

That's very handy, especially if you didn't make it to the weekend's session to
see the machine in action.

============
 Mechanical
============

I like the socket head cap screws Damien has used. They're easy to tighten up, they
look good, and it's essentially impossible to strip their heads. I like using them
on all kinds of engineering projects of this kind.

When tapping holes in aluminium, a heavy lubricating oil isn't needed. A little bit
of kerosene works well, or a similar light lubricating spray such as WD-40 or RP-7
can be used, which is convenient to apply. A little bit of similar lubricant also
doesn't hurt when hacksawing thick pieces of aluminium, either.

I have taps and dies and tap wrenches, which I will bring around to Andy's at some
point, presumably at the next weekend meeting if it looks like there's consensus
that machine fabrication will commence at that time.

=============
 Electronics
=============

There are six PCBs in Damien's machine: three stepper motor controller boards, the
main board containing the microcontroller, the USB UART board, and another simple
board containing a relay and connectors for power supply distribution to the other
boards.

Damien's design employs an ATmega324P as the main microcontroller.
I would propose building our machine using an ATmega644P as the main
microcontroller, for no reason other than the simple fact that I already have
two of them sitting right in front of me as I type this, so we do not need to
purchase it.

The ATMega644P has 64 k of memory compared to 32 k on the ATmega324, however, in
essentially all respects they are identical, pin-compatible devices.
The devices I have stock of are 40-pin DIP through-hole packages, the same package
as used on Damien's controller board.

Here's Atmel's ATMega164/324/644 page with the datasheet and documentation:
http://www.atmel.com/dyn/products/product_card.asp?PN=ATmega164P

There are only a few electronic components which are *not* just easily available
from the local Jaycar store and need to be ordered from a more specialised overseas
supplier.

They are the stepper motor controller ICs, the USB UART bridge IC, and the 20x4 LCD
module. Damien's docs mention sourcing the LCD module from Futurelec, but if you're
going to get the stepper motor controller ICs from Digi-Key you might as well order
it all from Digi-Key in one hit, and save on shipping costs.

At this point, I would propose ordering the following from Digi-Key:

	1 x 20x4 character LCD module, 73-1251-ND, USD$27.91 ea.
	4 x A3977 stepper motor controller IC, 620-1146-1-ND, USD$8.31 ea.
	2 x CP2102 USB UART IC, 336-1160-ND, USD$2.21 ea.

In this proposed order, note that I have included a (one) spare for each of the ICs.

Before finalising the order, does anyone have a preferred colour or style for the
LCD display? The white backlight one sounds like it will look good, it will look
better than boring old green, and it was relatively cheap.

Damien's original design incorporates a CP2102 USB-to-UART bridge IC for the USB
interface into the microcontroller. In case you haven't heard of it, the CP2102
chip is essentially identical to the USB-to-UART chips manufactured by FTDI and
used, for example, on Arduino boards.

The CP2102 is only available in a QFN-28 package, which is a leadless chip with
seven pads on each side on the bottom of the chip, on a chip which is 5 mm wide
on each side. It would be almost impossible for a hobbyist to fabricate, and indeed,
Damien has shown on his web page how he was unable to practically get the device
soldered into place on the PCB.

One possible way to address this problem might potentially be to use a FT232RL chip
(the same USB UART chip from FTDI used, for example, on Arduino boards) in the
machine. The FT232RL is still a fairly compact surface mount device, but it is far,
far easier to solder up compared to the former device.

As far as any other hardware, software or firmware design choices or setup are
concerned, there are absolutely no differences between these two devices, since
they both do exactly the same thing.

What do you guys think? Would you consider changing the USB chip, or not bother?

Damien has used the Allegro A3977 stepper motor driver IC; this IC looks like a
pretty good device, and it's what we know is proven in the existing design, so
I see no reason to make any hardware changes for this part of the design.

(Maybe that's just because I haven't seen the schematics for those drivers, and if I
did, I might find something I'd like to change? :P But never mind.)

I don't see any reason why we can't just go ahead and fabricate three more PCBs
for the three stepper motor controller boards using Damien's CNC machine.

I'm happy to populate the boards and do the soldering.

The A3977 IC can be purchased from Digi-Key (620-1146-1-ND), costing USD$8.31 ea.
(That's a different price to what Damien said, maybe they put the price up since
Damien looked at it, or maybe I'm looking at the wrong chip, but I don't think so.)

It would be nice to have the schematics available for all the electronics in the
machine for documentation purposes; for example so that other groups could reproduce
their own machine if they wanted to.

I think that the power supply distribution PCB in Damien's machine can be eliminated
entirely, it's so simple that it's really not needed at all. It's entirely practical
to make a slight redesign to the main microcontroller PCB so that the 7805 regulator
is assimilated onto the main board, along with an input connector for the +24V
rail from the SMPS (switched-mode power supply) output. Three connectors to take
the +5V and +24V rails out to the three A3977 boards can also easily be included on
this board.

Another small thing I'd like to change would be to have the switched 240VAC output
from the solid-state AC relay to be connected to a female 240VAC three-pin socket,
which the original mains cable on the Proxxon tool can be plugged into, meaning that
the tool's original power cable is not modified or severed.

This means that the Proxxon tool can easily be removed from the machine if you wish
to use it for some odd job seperate from the milling machine, it can be swapped out
for a different tool, and it can be returned for a warranty claim if it breaks.

The only possible disadvantage is that there might be a little bit of excess cable
length laying around, but it can be coiled up and held out of the way with a cable
tie.

On the back panel of the machine we have a 240 VAC input in the form of an
IEC socket, plus a switch and fuse for the 240 VAC input. I think it would
be nice to use a Jaycar PP-4003 IEC socket module, which incorporates the
IEC socket, the mains switch, and the fuse into one integrated module,
which is nice and neat, requires less cutouts in the panel, and less
wiring. Furthermore, I already have a spare one of these laying around :)











The front panel of our electronics box will incorporate a power indicator
light, (or at least it should), but this power indicator could either be a
240 VAC neon indicator lamp, or a LED connected to the low voltage DC supply rail.

The front panel on Damien's machine includes a stepper motor lockout switch
which disconnects the 24 V rail from the stepper motor controller boards,
preventing the CNC machine from moving. I assume we will keep this switch in
our design, there seems to be no reason to change it or get rid of it, so it
might be a good idea to have both an indicator light (a LED) on the 24 V rail
so you can see when the 24 V rail is turned on, as well as a neon indicator
lamp connected to the 240 VAC supply.

I don't know for sure, but I assume that the indicator LED on Damien's machine
is just connected to the 24 V rail or something like that. It would be nice to
incorporate a 240 VAC power indicator as well.

